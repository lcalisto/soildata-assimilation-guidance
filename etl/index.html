
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Cookbook for a masterclass on Soil Data Assimilation">
      
      
        <meta name="author" content="Wageningen Environmental Research">
      
      
        <link rel="canonical" href="https://ejpsoil.github.io/soildata-assimilation-guidance/etl/">
      
      
        <link rel="prev" href="../identification/">
      
      
        <link rel="next" href="../codelists/">
      
      <link rel="icon" href="https://cdn.au.dk/favicon.ico">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.0.3">
    
    
      
        <title>Data harmonization (vector data) - Soil Data Assimilation Guidance</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.6b71719e.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.2505c338.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#data-harmonization-vector-data" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://ejpsoil.eu/" title="Soil Data Assimilation Guidance" class="md-header__button md-logo" aria-label="Soil Data Assimilation Guidance" data-md-component="logo">
      
  <img src="https://ejpsoil.eu/fileadmin/projects/ejpsoil/EJP_Soil_logo_cmyk-h100.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Soil Data Assimilation Guidance
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Data harmonization (vector data)
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/ejpsoil/soildata-assimilation-guidance" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://ejpsoil.eu/" title="Soil Data Assimilation Guidance" class="md-nav__button md-logo" aria-label="Soil Data Assimilation Guidance" data-md-component="logo">
      
  <img src="https://ejpsoil.eu/fileadmin/projects/ejpsoil/EJP_Soil_logo_cmyk-h100.png" alt="logo">

    </a>
    Soil Data Assimilation Guidance
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ejpsoil/soildata-assimilation-guidance" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../identification/" class="md-nav__link">
        Identification
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Harmonization
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Harmonization
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#minimal" class="md-nav__link">
    Minimal
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#traditional" class="md-nav__link">
    Traditional
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#experimental" class="md-nav__link">
    Experimental
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../codelists/" class="md-nav__link">
        Code lists
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../metadata/" class="md-nav__link">
        Discovery
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../view/" class="md-nav__link">
        View
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../download/" class="md-nav__link">
        Download
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../QOS/" class="md-nav__link">
        QOS
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#minimal" class="md-nav__link">
    Minimal
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#traditional" class="md-nav__link">
    Traditional
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#experimental" class="md-nav__link">
    Experimental
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  



<h1 id="data-harmonization-vector-data">Data harmonization (vector data)</h1>
<p>A main aspect of INSPIRE is the harmonization of environmental data throughout Europe. Alinging the format, structure and content of your data to match a common model, so the data can be integrated with other datasets in Europe. And to describe aspects of the data which differ from the common model in such a way, that the differences can be understood by others. </p>
<p>Data harmonization is an aspect of step <code>4) data organization</code> in the <a href="https://www.isric.org/index.php/utilise/community-practice">soil information workflow</a>.</p>
<p>An important activity related to harmonization is the adoption of INSPIRE code lists and extending those lists to capture regional conventions. The role of code lists is explained in a dedicated <a href="../codelists/">codelists section</a>. </p>
<p>INSPIRE datamodel extension is another aspect to consider as part of data harmonization. Harmonization should not lead to loss of data (because some data doesn't fit the target model). Instead the target model should be extended to capture these aspects. <a href="https://github.com/INSPIRE-MIF/technical-guidelines/blob/2022.2/data/so/dataspecification_so.adoc#soil-data-model-extensions-informative">Annex D of TG Soil</a> has a specific example on extending the model for a soil contamination use case. Options for model extensions vary per technology. Wetransform has a <a href="http://inspire-extensions.wetransform.to">dedicated section on model extension</a> on their website, based on an <a href="https://www.geonovum.nl/uploads/documents/20161121-INSPIRE-Extensions.pdf">R&amp;D project</a> from 2016. </p>
<p>If you missed the initial EJP Training on Soil data good practices, you can still have a look at <a href="https://wur.yuja.com/V/Video?v=195126&amp;node=829569&amp;a=1133213006&amp;autoplay=1">a presentation about vector data harmonization</a>.</p>
<p>This document lists various implementation options for data harmonization. </p>
<h2 id="minimal">Minimal</h2>
<p>The <a href="https://github.com/INSPIRE-MIF/gp-geopackage-encodings">good practice on GeoPackage</a> describes a relational database format to share harmonised data. <a href="https://www.geopackage.org/">GeoPackage</a> is a standardised format for storing relational data by the Open Geospatial Consorium, building on the SQLite database specification. Becuase many soil data is stored in the form of relational databases, the transformation to GeoPackage is relatively easy. The transformation process could for example be triggered by a series of database queries within a GIS Desktop client such as QGIS, in Python scripts or an ETL tool such as Hale Studio or FME. </p>
<p>Pro's and Con's:</p>
<ul>
<li>The GeoPackage format is easy to consume by average users.</li>
<li>To capture the hierarchical structure of the INSPIRE datamodels, a lot of tables are needed, resulting in a complex data-model. </li>
<li>The good practice is recent, so not a lot of community experience is available yet </li>
<li>Users download a full dataset, no (filering) api's are defined for GeoPackages yet</li>
</ul>
<table>
<thead>
<tr>
<th>Cookbook</th>
<th>Software</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="../tools/glosis-db/">Glosis as a database</a></td>
<td>-</td>
<td>Harmonise soil data using GeoPackage</td>
</tr>
</tbody>
</table>
<h2 id="traditional">Traditional</h2>
<p>Tools like Hale Studio and FME are typically used to configure a conversion from data in a relational data model to data in a GML based INSPIRE model. The output is a big GML file which can be published using a WFS server or Atom download service. Below table links to detailed pages on various relevant technologies.</p>
<table>
<thead>
<tr>
<th>Cookbook</th>
<th>Software</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="../tools/hale-studio/">Hale Studio</a></td>
<td><a href="https://wetransform.to/halestudio/">Hale Studio</a></td>
<td>Humboldt Alignment Editor Studio is a Desktop tool to author 'data alignments'.</td>
</tr>
<tr>
<td><a href="https://www.safe.com/integrate/inspire-gml/">FME &amp; INSPIRE</a></td>
<td><a href="https://www.safe.com/fme/">FME</a></td>
<td>Feature Manipulation Engine is a visually oriented data integration platform</td>
</tr>
</tbody>
</table>
<p>You may not have considered before, but consuming a rich GML is not straight forward in common GIS clients like ArcGIS or QGIS. To consume a rich GML you need software which is able to traverse xml hierarchies and links. Tools like Hale Studio can also be used to read rich GML and convert it back to a relational database. Unfortunately you can not automatically reverse an existing database to GML ETL-configuration. But you can set up a new ETL configuration to read and transform the rich GML. A recipe is available which <a href="../tools/hale-studio-consume-gml/">imports INSPIRE Soil GML from the city of Berlin and converts it to a relational database</a>.</p>
<p>Alternatively some server tools offer on the fly transformation as part of the download service, the data mapping is defined within the service configuration.</p>
<table>
<thead>
<tr>
<th>Cookbook</th>
<th>Software</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="../tools/geoserver/">GeoServer</a></td>
<td><a href="https://geoserver.org">GeoServer</a></td>
<td>Java based server implementation</td>
</tr>
<tr>
<td><a href="../tools/deegree/">deegree</a></td>
<td><a href="https://www.deegree.org">deegree</a></td>
<td>Java based server implementation</td>
</tr>
<tr>
<td><a href="../tools/xtraserver/">Xtraserver</a></td>
<td><a href="https://www.interactive-instruments.de/en/xtraserver/">xtraserver</a></td>
<td>Java based server implementation, also distributed as <a href="https://enterprise.arcgis.com/en/inspire/10.8/get-started/what-is-arcgis-for-inspire.htm">ArcGIS for INSPIRE Classic</a></td>
</tr>
</tbody>
</table>
<h2 id="experimental">Experimental</h2>
<p>Because the common soil datamodels substantially depend on <a href="https://www.ogc.org/standards/om">Observations and Measurements</a> (O&amp;M), the use of <a href="https://www.ogc.org/standards/sos">Sensor Observation Service</a> (SOS) as a download service is a proper alternative to WFS. Various tools facilitate SOS, or its follow-up, <a href="https://www.ogc.org/standards/sensorthings">SensorThings API</a>. Katharina Schleidt provides some interesting work on <a href="http://www.datacove.eu/inspire/">setting up SensorThings API to provide INSPIRE data</a>. See also her <a href="https://wur.yuja.com/V/Video?v=186405&amp;node=793609&amp;a=1936269719&amp;autoplay=1">presentation about harmonization based on Coverage and Sensor</a> from the 2022 EJP Soil training.</p>
<table>
<thead>
<tr>
<th>Product</th>
<th>Software</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="../tools/52north/">52North</a></td>
<td><a href="https://52north.org/software/software-projects/sos/">52 north</a></td>
<td>Java based SOS and STA implementation</td>
</tr>
<tr>
<td><a href="https://datacoveeu.github.io/API4INSPIRE/dissemination/Workshop-2020-11-19.html">Workshop API4INSPIRE</a></td>
<td><a href="https://fraunhoferiosb.github.io/FROST-Server/">Frost server</a></td>
<td>Java based implementation of Sensorthings API</td>
</tr>
<tr>
<td><a href="https://sourceforge.net/projects/istsos/files/Tutorials/">istSOS tutorial - Python notebook</a></td>
<td><a href="http://istsos.org/">istSOS</a></td>
<td>Python based open source SOS 1.0 implementation</td>
</tr>
</tbody>
</table>
<p>Various groups prefer to work with semantic web technology over UML/XSD to publish environmental data. Various tools exist which expose relational models as semantic graph.</p>
<p>See also the <a href="https://wur.yuja.com/V/Video?v=184392&amp;node=785996&amp;a=2121794774&amp;autoplay=1">presenation about semantic web (GLOSIS)</a> from the 2022 EJP Soil training.</p>
<table>
<thead>
<tr>
<th>Product</th>
<th>Software</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://doi.org/10.15454/YJLFZI">Publish data through semantic web</a></td>
<td><a href="https://www.yworks.com/products/yed">Yed</a> <a href="https://forgemia.inra.fr/anaee-dev/coby">Coby</a> <a href="https://blazegraph.com/">BlazeGraph</a></td>
<td>Cookbook by INRAE on publishing soild data as RDF</td>
</tr>
<tr>
<td><a href="https://ontop-vkg.org/tutorial/">Tutorial</a></td>
<td><a href="https://ontop-vkg.org/">Ontop</a></td>
<td>Exposes the content of arbitrary relational databases as knowledge graphs</td>
</tr>
<tr>
<td><a href="../tools/rml/">YARRRML</a></td>
<td><a href="https://rml.io/">RML mapper</a></td>
<td>Relational to RDF mapping using RML.io</td>
</tr>
<tr>
<td><a href="https://archive.topquadrant.com/doc/7.4/quick_start_guides/index.html">EDG Quick start guides</a></td>
<td><a href="https://www.topquadrant.com">TopBraid EDG</a></td>
<td>Desktop/SAAS solution to manage graphs including various <a href="https://www.topquadrant.com/doc/7.4/scripting/importing.html">data imports</a></td>
</tr>
</tbody>
</table>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2022-2023 Wageningen Environmental Research
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.e5c33ebb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.ba449ae6.min.js"></script>
      
    
  </body>
</html>