
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Cookbook for a masterclass on Soil Data Assimilation">
      
      
        <meta name="author" content="Wageningen Environmental Research">
      
      
        <link rel="canonical" href="https://ejpsoil.github.io/soildata-assimilation-guidance/tools/hale-studio/">
      
      
      
      <link rel="icon" href="https://cdn.au.dk/favicon.ico">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.0.3">
    
    
      
        <title>HALE Studio - Soil Data Assimilation Guidance</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6b71719e.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.2505c338.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#hale-studio" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://ejpsoil.eu/" title="Soil Data Assimilation Guidance" class="md-header__button md-logo" aria-label="Soil Data Assimilation Guidance" data-md-component="logo">
      
  <img src="https://ejpsoil.eu/fileadmin/projects/ejpsoil/EJP_Soil_logo_cmyk-h100.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Soil Data Assimilation Guidance
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              HALE Studio
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/ejpsoil/soildata-assimilation-guidance" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://ejpsoil.eu/" title="Soil Data Assimilation Guidance" class="md-nav__button md-logo" aria-label="Soil Data Assimilation Guidance" data-md-component="logo">
      
  <img src="https://ejpsoil.eu/fileadmin/projects/ejpsoil/EJP_Soil_logo_cmyk-h100.png" alt="logo">

    </a>
    Soil Data Assimilation Guidance
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ejpsoil/soildata-assimilation-guidance" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../identification/" class="md-nav__link">
        Identification
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../etl/" class="md-nav__link">
        Harmonization
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../codelists/" class="md-nav__link">
        Code lists
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../metadata/" class="md-nav__link">
        Discovery
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../view/" class="md-nav__link">
        View
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../download/" class="md-nav__link">
        Download
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../QOS/" class="md-nav__link">
        QOS
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#soter-database" class="md-nav__link">
    SOTER Database
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preparing-the-data" class="md-nav__link">
    Preparing the data
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-hale-studio" class="md-nav__link">
    Install Hale Studio
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#define-harmonization-rules" class="md-nav__link">
    Define harmonization rules
  </a>
  
    <nav class="md-nav" aria-label="Define harmonization rules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#join-tables" class="md-nav__link">
    Join tables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#link-or-embed-and-identification" class="md-nav__link">
    Link or embed and identification?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#anytype-in-xsd" class="md-nav__link">
    Anytype in XSD
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#export-gml" class="md-nav__link">
    Export GML
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  



<h1 id="hale-studio">HALE Studio</h1>
<p><em>Status: in progress</em></p>
<p>HALE Studio aims to enable users to set up a harmonization workflow on datasets from a local model to a common model, such as INSPIRE. The user interface presents the model of the source dataset (derived from database) on the left and the target model on the right (derived from xml schema). Conversion rules are defined by selecting similar properties on both sides.</p>
<p>The open source software has been developed in the scope of a European Research project, HUMBOLDT (2006) and is currently maintained by a company called <a href="https://wetransform.to">WeTransform</a> in Darmstad Germany. WeTransform hosts the Hale Studio <a href="http://help.halestudio.org/latest">user guide</a> and a <a href="https://discuss.wetransform.to">user forum</a>. The Git repository for Hale Studio is at https://github.com/halestudio/hale.</p>
<p>This recipe has been developed in the scope of a Masterclass on data assimilation within the <a href="https://ejpsoil.eu/">EJP Soil project</a> and builds on harmonization work performed in the scope of the <a href="https://www.isric.org/projects/soil-and-terrain-database-danube-basin">eDanube project</a>.</p>
<p>In this recipe we'll harmonize a SOTER database to the INSPIRE model. Read more about the INSPIRE Soil model in the relevant <a href="https://inspire.ec.europa.eu/id/document/tg/so">technical guidelines</a>. </p>
<p>Contents of the recipe</p>
<ul>
<li>SOTER database</li>
<li>Proparing the data </li>
<li>Install &amp; get started with Hale Studio</li>
<li>Define harmonization rules</li>
<li>Export GML</li>
</ul>
<h2 id="soter-database">SOTER Database</h2>
<p>For this recipe we're going to use the SOTER database of Cuba. Download the zip file from https://data.isric.org/geonetwork/srv/eng/catalog.search#/metadata/f31ac19f-67a4-4f64-94cc-d4f063ea9add. </p>
<p>The <a href="https://www.isric.org/explore/soter">SOTER programme</a> was initiated in 1986 by the Food and Agricultural Organization of the United Nations (FAO), the United Nations Environmental Programme and ISRIC, under the auspices of the International Soil Science Society. The aim of the programme was to develop a global SOTER database at scale 1:1 million that was supposed to be the successor of the FAO-UNESCO Soil Map of the World. A SOTER database with global coverage was never achieved, but SOTER databases were developed for various regions, countries and continents.</p>
<p>The picture below shows the database structure of a SOTER database. The database structure allows to store terrain, soil profile up to wet chemistry results.</p>
<p><img alt="Soter schema" src="../img/soter-schema.png" /></p>
<p>In this recipe we're focussing on the <code>RepresentativeHorizonValues</code> table mostly, which contains observed properties for each horizon. </p>
<h2 id="preparing-the-data">Preparing the data</h2>
<p>Notice that, like many other soil databases, the observed soil property values are listed as columns for each horizon. The INSPIRE model instead uses the Observations and Measurments model, in which each observation is an individual entity which includes the feature of interest (e.g. <code>Horizon 2</code>), the observed property (e.g. <code>pH</code>), the result (e.g. <code>7.2</code>) and the process (e.g. <code>pHCaCl2</code>). </p>
<p><img alt="Observations and measurements, source 52North" src="../img/obsmes.png" /></p>
<p>A data transformation required for this step is challenging within Hale, but relatively easy within the database. So before starting up Hale we'll make an initial transformation within the database.</p>
<p>The <a href="https://files.isric.org/public/soter/CU-SOTER.zip">SOTER zip file</a> contains a SQLite as well as a Access version of the database. In this recipe we'll work with Access, but you can also use the SQLite version, in that case install for example <a href="https://sqlitebrowser.org/">SQLite browser</a> to interact with the database. Some of the queries may slightly vary between SQLite and Access.</p>
<p>Run the query below, to create a new <code>OBSERVATIONS</code> table. </p>
<p>In Access create a new <code>query</code> in <code>design view</code>. </p>
<p><img alt="Query design" src="../img/query-design-view.png" /></p>
<p>Then open <code>SQL view</code>.</p>
<p><img alt="SQL view" src="../img/sql-view.png" /></p>
<p>Run the query, by clicking <code>Run</code> in the <code>Query design</code> toolbar.</p>
<pre><code>SELECT * INTO OBSERVATIONS
FROM (Select HONU,PRID,'SCMO' as PARAM,SCMO as RESULT from RepresentativeHorizonValues where SCMO is not null union
Select HONU,PRID,'SCDR' as PARAM,SCDR as RESULT from RepresentativeHorizonValues where SCDR is not null union
Select HONU,PRID,'STGR' as PARAM,STGR as RESULT from RepresentativeHorizonValues where STGR is not null union
Select HONU,PRID,'STSI' as PARAM,STSI as RESULT from RepresentativeHorizonValues where STSI is not null union
Select HONU,PRID,'STTY' as PARAM,STTY as RESULT from RepresentativeHorizonValues where STTY is not null union
Select HONU,PRID,'SDVC' as PARAM,SDVC as RESULT from RepresentativeHorizonValues where SDVC is not null union
Select HONU,PRID,'SDCO' as PARAM,SDCO as RESULT from RepresentativeHorizonValues where SDCO is not null union
Select HONU,PRID,'SDME' as PARAM,SDME as RESULT from RepresentativeHorizonValues where SDME is not null union
Select HONU,PRID,'SDFI' as PARAM,SDFI as RESULT from RepresentativeHorizonValues where SDFI is not null union
Select HONU,PRID,'SDVF' as PARAM,SDVF as RESULT from RepresentativeHorizonValues where SDVF is not null union
Select HONU,PRID,'SDTO' as PARAM,SDTO as RESULT from RepresentativeHorizonValues where SDTO is not null union
Select HONU,PRID,'STPC' as PARAM,STPC as RESULT from RepresentativeHorizonValues where STPC is not null union
Select HONU,PRID,'CLPC' as PARAM,CLPC as RESULT from RepresentativeHorizonValues where CLPC is not null union
Select HONU,PRID,'PSCL' as PARAM,PSCL as RESULT from RepresentativeHorizonValues where PSCL is not null union
Select HONU,PRID,'BULK' as PARAM,BULK as RESULT from RepresentativeHorizonValues where BULK is not null union
Select HONU,PRID,'ELCO' as PARAM,ELCO as RESULT from RepresentativeHorizonValues where ELCO is not null union
Select HONU,PRID,'SSO4' as PARAM,SSO4 as RESULT from RepresentativeHorizonValues where SSO4 is not null union
Select HONU,PRID,'HCO3' as PARAM,HCO3 as RESULT from RepresentativeHorizonValues where HCO3 is not null union
Select HONU,PRID,'SCO3' as PARAM,SCO3 as RESULT from RepresentativeHorizonValues where SCO3 is not null union
Select HONU,PRID,'EXCA' as PARAM,EXCA as RESULT from RepresentativeHorizonValues where EXCA is not null union
Select HONU,PRID,'EXMG' as PARAM,EXMG as RESULT from RepresentativeHorizonValues where EXMG is not null union
Select HONU,PRID,'EXNA' as PARAM,EXNA as RESULT from RepresentativeHorizonValues where EXNA is not null union
Select HONU,PRID,'EXCK' as PARAM,EXCK as RESULT from RepresentativeHorizonValues where EXCK is not null union
Select HONU,PRID,'EXAL' as PARAM,EXAL as RESULT from RepresentativeHorizonValues where EXAL is not null union
Select HONU,PRID,'EXAC' as PARAM,EXAC as RESULT from RepresentativeHorizonValues where EXAC is not null union
Select HONU,PRID,'CECS' as PARAM,CECS as RESULT from RepresentativeHorizonValues where CECS is not null union
Select HONU,PRID,'TCEQ' as PARAM,TCEQ as RESULT from RepresentativeHorizonValues where TCEQ is not null union
Select HONU,PRID,'GYPS' as PARAM,GYPS as RESULT from RepresentativeHorizonValues where GYPS is not null union
Select HONU,PRID,'P2O5' as PARAM,P2O5 as RESULT from RepresentativeHorizonValues where P2O5 is not null union
Select HONU,PRID,'PRET' as PARAM,PRET as RESULT from RepresentativeHorizonValues where PRET is not null union
Select HONU,PRID,'FEDE' as PARAM,FEDE as RESULT from RepresentativeHorizonValues where FEDE is not null union
Select HONU,PRID,'PHAQ' as PARAM,PHAQ as RESULT from RepresentativeHorizonValues where PHAQ is not null union
Select HONU,PRID,'PHKC' as PARAM,PHKC as RESULT from RepresentativeHorizonValues where PHKC is not null union
Select HONU,PRID,'SONA' as PARAM,SONA as RESULT from RepresentativeHorizonValues where SONA is not null union
Select HONU,PRID,'SOCA' as PARAM,SOCA as RESULT from RepresentativeHorizonValues where SOCA is not null union
Select HONU,PRID,'SOMG' as PARAM,SOMG as RESULT from RepresentativeHorizonValues where SOMG is not null union
Select HONU,PRID,'SOLK' as PARAM,SOLK as RESULT from RepresentativeHorizonValues where SOLK is not null union
Select HONU,PRID,'SOCL' as PARAM,SOCL as RESULT from RepresentativeHorizonValues where SOCL is not null union
Select HONU,PRID,'FEPE' as PARAM,FEPE as RESULT from RepresentativeHorizonValues where FEPE is not null union
Select HONU,PRID,'ALDE' as PARAM,ALDE as RESULT from RepresentativeHorizonValues where ALDE is not null union
Select HONU,PRID,'CLAY' as PARAM,CLAY as RESULT from RepresentativeHorizonValues where CLAY is not null union
Select HONU,PRID,'TOTC' as PARAM,TOTC as RESULT from RepresentativeHorizonValues where TOTC is not null union
Select HONU,PRID,'TOTN' as PARAM,TOTN as RESULT from RepresentativeHorizonValues where TOTN is not null  
);
</code></pre>
<p>Verify that a new table <code>OBSERVATIONS</code> is available and that it is populated.</p>
<h2 id="install-hale-studio">Install Hale Studio</h2>
<p>Download and install Hale Studio from github. There are <a href="https://github.com/halestudio/hale/releases/tag/4.1.0">installers for windows, linux and apple</a>. 
Kate Lyndegaard from WeTransform published a nice overview of Hale Studio at https://www.youtube.com/watch?v=BKNMV-Jp9HM&amp;t=332s.</p>
<ul>
<li>First create a new project </li>
<li>Import the SOTER database as <code>source schema</code>. </li>
<li>Import the same database file again as 'source data'. </li>
<li>Repeat these 2 steps for the Cuba shapefile, available in the GIS folder of the zip file </li>
<li>Load the INSPIRE Soil model as a target schema. Load the latest version of the model from https://inspire.ec.europa.eu/schemas/so/4.0/Soil.xsd (<code>from url</code> tab, click 
 <code>detect</code> after entering the url).</li>
</ul>
<p><img alt="Load target" src="../img/hale-load-target.png" /></p>
<h2 id="define-harmonization-rules">Define harmonization rules</h2>
<p>We'll go through some cases to highlight some of the features, we'll not produce a full mapping.</p>
<h3 id="join-tables">Join tables</h3>
<p>In order to link the geometries from the shapefile to the SOTER data, we'll use a table join.
On the left column, select the shapefile as well as the <code>terrain</code>, <code>soils</code> and <code>soilscomponent</code> tables (ctrl-click). On the right colum select the SoilBody type.
Now click the blue arrow in the middle and select the <code>join</code> method.</p>
<h3 id="link-or-embed-and-identification">Link or embed and identification?</h3>
<p>XML allows to embed a property or to reference the value of the property elsewhere. An example; both snippets below have the same meaning, the first is easier to read, the second is easier to handle by software (prevent duplication).</p>
<pre><code class="language-xml">&lt;person role=&quot;student&quot; name=&quot;Peter&quot;&gt;
    &lt;memberOf&gt;
        &lt;class name=&quot;2B&quot;&gt;
            &lt;hasMember&gt;
                &lt;person role=&quot;teacher&quot; name=&quot;Cynthia&quot;&gt;
            &lt;/hasMember&gt;
        &lt;/class&gt;
    &lt;memberOf&gt;
&lt;/person&gt;
</code></pre>
<p>And</p>
<pre><code class="language-xml">&lt;person role=&quot;student&quot; name=&quot;Peter&quot; gml:id=&quot;#student-peter&quot;&gt;
    &lt;memberOf xlink:href=&quot;#class-2b&quot;&gt;
&lt;/person&gt;
&lt;person role=&quot;teacher&quot; name=&quot;Cynthia&quot; gml:id=&quot;#teacher-cynthia&quot;&gt;
    &lt;memberOf xlink:href=&quot;#class-2b&quot;&gt;
&lt;/person&gt;
&lt;class name=&quot;2B&quot; gml:id=&quot;#class-2b&quot;/&gt;
</code></pre>
<p>A good practice is to add reverse links to the second snippet:</p>
<pre><code class="language-xml">&lt;class name=&quot;2B&quot; gml:id=&quot;#class-2b&quot;&gt;
    &lt;hasMember xlink:href=&quot;#teacher-cynthia&quot;/ &gt;
    &lt;hasMember xlink:href=&quot;#student-peter&quot; /&gt;
&lt;/class&gt;
</code></pre>
<p>Both approaches are supported and can be combined in Hale Studio, but you have to consider upfront which approach to use when. The first approach becomes quite complex if the levels of nesting increase.</p>
<p>A suggestion from our side; define Plot, Profile, OM_Observation and Laboratory as root types and embed other types.</p>
<h3 id="anytype-in-xsd">Anytype in XSD</h3>
<p>XSD allows to leave the type of a property as <code>any</code>. From a standardisation perspective, this is not optimal, because every developer may implement a different type for that field. In the INSPRE Soil theme this challenge is very obvious because the type of the result property of an observation is defined as <code>any</code>.
Hale Studio is not able to process <code>anytype</code> fields by default. Instead you have to add below snippet to the <code>eu.esdihumboldt.hale.io.schema.read.target</code> resource of the  <code>project.halex</code> file. </p>
<pre><code> &lt;complex-setting name=&quot;customTypeContent&quot;&gt;
    &lt;xsd:typeContentConfig xmlns:xsd=&quot;http://www.esdi-humboldt.eu/hale/io/xsd&quot;&gt;
        &lt;core:list xmlns:core=&quot;http://www.esdi-humboldt.eu/hale/core&quot;&gt;
            &lt;core:entry&gt;
                &lt;xsd:association&gt;
                    &lt;xsd:property&gt;
                        &lt;core:list&gt;
                            &lt;core:entry&gt;
                                &lt;core:name namespace=&quot;http://www.opengis.net/om/2.0&quot;&gt;OM_ObservationType&lt;/core:name&gt;
                            &lt;/core:entry&gt;
                            &lt;core:entry&gt;
                                &lt;core:name namespace=&quot;http://www.opengis.net/om/2.0&quot;&gt;result&lt;/core:name&gt;
                            &lt;/core:entry&gt;
                        &lt;/core:list&gt;
                    &lt;/xsd:property&gt;
                    &lt;xsd:config&gt;
                        &lt;xsd:typeContent mode=&quot;elements&quot;&gt;
                            &lt;xsd:elements&gt;
                                &lt;core:list&gt;
                                    &lt;core:entry&gt;
                                        &lt;core:name namespace=&quot;http://www.isotc211.org/2005/gco&quot;&gt;CharacterString&lt;/core:name&gt;
                                    &lt;/core:entry&gt;
                                &lt;/core:list&gt;
                            &lt;/xsd:elements&gt;
                        &lt;/xsd:typeContent&gt;
                    &lt;/xsd:config&gt;
                &lt;/xsd:association&gt;
            &lt;/core:entry&gt;
        &lt;/core:list&gt;
    &lt;/xsd:typeContentConfig&gt;
&lt;/complex-setting&gt;
</code></pre>
<p><img alt="Hale join" src="../img/hale-join.png" /></p>
<h2 id="export-gml">Export GML</h2>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2022-2023 Wageningen Environmental Research
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.e5c33ebb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.ba449ae6.min.js"></script>
      
    
  </body>
</html>